"use strict";(self.webpackChunkNacos=self.webpackChunkNacos||[]).push([[7544],{3905:(e,n,o)=>{o.d(n,{Zo:()=>l,kt:()=>b});var t=o(67294);function a(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function r(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(n){a(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function s(e,n){if(null==e)return{};var o,t,a=function(e,n){if(null==e)return{};var o,t,a={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],n.indexOf(o)>=0||(a[o]=e[o]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var c=t.createContext({}),p=function(e){var n=t.useContext(c),o=n;return e&&(o="function"==typeof e?e(n):i(i({},n),e)),o},l=function(e){var n=p(e.components);return t.createElement(c.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var o=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=p(o),d=a,b=m["".concat(c,".").concat(d)]||m[d]||u[d]||r;return o?t.createElement(b,i(i({ref:n},l),{},{components:o})):t.createElement(b,i({ref:n},l))}));function b(e,n){var o=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=d;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[m]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=o[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,o)}d.displayName="MDXCreateElement"},67190:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var t=o(87462),a=(o(67294),o(3905));const r={title:"Nacos with Dubbo fusion become registry",keywords:["Dubbo","Nacos","registration center"],description:"Nacos with Dubbo fusion become registry"},i="Nacos with Dubbo fusion become registry",s={unversionedId:"v2/ecology/use-nacos-with-dubbo",id:"v2/ecology/use-nacos-with-dubbo",title:"Nacos with Dubbo fusion become registry",description:"Nacos with Dubbo fusion become registry",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/v2/ecology/use-nacos-with-dubbo.md",sourceDirName:"v2/ecology",slug:"/v2/ecology/use-nacos-with-dubbo",permalink:"/en/docs/next/v2/ecology/use-nacos-with-dubbo",draft:!1,tags:[],version:"current",frontMatter:{title:"Nacos with Dubbo fusion become registry",keywords:["Dubbo","Nacos","registration center"],description:"Nacos with Dubbo fusion become registry"},sidebar:"docs",previous:{title:"NacosSync user guide",permalink:"/en/docs/next/v2/ecology/use-nacos-sync"},next:{title:"Nacos with Spring Projects",permalink:"/en/docs/next/v2/ecology/use-nacos-with-spring"}},c={},p=[{value:"Preparatory work",id:"preparatory-work",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Increasing Maven dependency",id:"increasing-maven-dependency",level:3},{value:"Configuration registry",id:"configuration-registry",level:3},{value:"Dubbo Spring externalized configuration",id:"dubbo-spring-externalized-configuration",level:3},{value:"Spring XML configuration files",id:"spring-xml-configuration-files",level:3},{value:"Complete sample",id:"complete-sample",level:2},{value:"Sample interface and implementation",id:"sample-interface-and-implementation",level:3},{value:"Spring annotations driver sample",id:"spring-annotations-driver-sample",level:3},{value:"Provider annotation driven implementation",id:"provider-annotation-driven-implementation",level:4},{value:"Service consumer comments drive implementation",id:"service-consumer-comments-drive-implementation",level:4},{value:"Run annotation driver sample",id:"run-annotation-driver-sample",level:4},{value:"Spring XML configuration driver sample",id:"spring-xml-configuration-driver-sample",level:3},{value:"Provider XML configuration",id:"provider-xml-configuration",level:4},{value:"Service consumer driven XML configuration",id:"service-consumer-driven-xml-configuration",level:4},{value:"Run the XML configuration driven example",id:"run-the-xml-configuration-driven-example",level:4}],l={toc:p},m="wrapper";function u(e){let{components:n,...o}=e;return(0,a.kt)(m,(0,t.Z)({},l,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"nacos-with-dubbo-fusion-become-registry"},"Nacos with Dubbo fusion become registry"),(0,a.kt)("p",null,"Nacos as Dubbo ecosystems important registry implementation, including ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/dubbo/dubbo-registry-nacos"},(0,a.kt)("inlineCode",{parentName:"a"},"dubbo-registry-nacos"))," is Dubbo fusion Nacos registry implementation."),(0,a.kt)("h2",{id:"preparatory-work"},"Preparatory work"),(0,a.kt)("p",null,"When you put ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/dubbo/tree/master/dubbo-registry/dubbo-registry-nacos"},(0,a.kt)("inlineCode",{parentName:"a"},"dubbo-registry-nacos"))," integrated into your dubbo project before, please make sure the background nacos service has started. If you are still not familiar with the basic use of Nacos, reference ",(0,a.kt)("a",{parentName:"p",href:"/en/docs/next/v2/quickstart/quick-start"},"Quick Start for Nacos"),"."),(0,a.kt)("h2",{id:"quick-start"},"Quick Start"),(0,a.kt)("p",null,'Nacos Dubbo fusion become registry procedure is very simple, general steps can be divided into "increasing Maven dependency" and "the registry".'),(0,a.kt)("h3",{id:"increasing-maven-dependency"},"Increasing Maven dependency"),(0,a.kt)("p",null,"First, you need to ",(0,a.kt)("inlineCode",{parentName:"p"},"dubbo-registry-nacos"),"Maven dependent on added to your project ",(0,a.kt)("inlineCode",{parentName:"p"},"pom.xml")," file, and strongly recommend that you use the dubbo ",(0,a.kt)("inlineCode",{parentName:"p"},"2.6.5"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n\n    ...\n    \n    \x3c!-- Dubbo dependency --\x3e\n    <dependency>\n        <groupId>com.alibaba</groupId>\n        <artifactId>dubbo</artifactId>\n        <version>3.0.5</version>\n    </dependency>\n\n    \x3c!-- Dubbo Nacos registry dependency --\x3e\n    <dependency>\n        <groupId>com.alibaba</groupId>\n        <artifactId>dubbo-registry-nacos</artifactId>\n        <version>3.0.5</version>\n    </dependency>\n\n    \x3c!-- Alibaba Spring Context extension --\x3e\n    <dependency>\n        <groupId>com.alibaba.spring</groupId>\n        <artifactId>spring-context-support</artifactId>\n        <version>1.0.11</version>\n    </dependency>\n\n    ...\n    \n</dependencies>\n")),(0,a.kt)("p",null,"When a project to add",(0,a.kt)("inlineCode",{parentName:"p"},"dubbo-registry-nacos"),", you don't need to explicitly logic programming to realize service discovery and registration, actual implementation is provided by the third party and then configure Naocs registry."),(0,a.kt)("h3",{id:"configuration-registry"},"Configuration registry"),(0,a.kt)("p",null,"Suppose you Dubbo application using the Spring Framework assembly, there will be two kinds of optional configuration method, respectively: ",(0,a.kt)("a",{parentName:"p",href:"https://mercyblitz.github.io/2018/01/18/Dubbo-%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE/"},"Dubbo Spring externalized configuration"),", and the Spring XML configuration files, and, I strongly recommend the former."),(0,a.kt)("h3",{id:"dubbo-spring-externalized-configuration"},"Dubbo Spring externalized configuration"),(0,a.kt)("p",null,"Dubbo Spring externalized configuration consists of Dubbo ",(0,a.kt)("inlineCode",{parentName:"p"},"2.5.8"),"  introduced new features, through the Spring ",(0,a.kt)("inlineCode",{parentName:"p"},"Environment")," attribute automatically generate and bind the Dubbo configuration Bean, implement configuration to simplify, and lower the threshold of service development."),(0,a.kt)("p",null,"Suppose you Dubbo applications using Nacos as registry, and the server IP address is:",(0,a.kt)("inlineCode",{parentName:"p"},"10.20.153.10")," at the same time, the registered address as Dubbo externalized configuration properties are stored in ",(0,a.kt)("inlineCode",{parentName:"p"},"dubbo-config.properties")," file, as shown below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-properties"},"## application\ndubbo.application.name = your-dubbo-application\n\n## Nacos registry address\ndubbo.registry.address = nacos://10.20.153.10:8848\n##If you want to use your own namespace, you can use the following two methods:\n#dubbo.registry.address = nacos://10.20.153.10:8848?namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932\n#dubbo.registry.parameters.namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932\n...\n")),(0,a.kt)("p",null,"Then, restart your application Dubbo, Dubbo information services and consumption in Nacos console can show:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://img.alicdn.com/tfs/TB1n6m7zMTqK1RjSZPhXXXfOFXa-2784-1058.png",alt:"image-20181213103845976-4668726.png | left | 747x284"})),(0,a.kt)("p",null,"As shown, the service name prefix for ",(0,a.kt)("inlineCode",{parentName:"p"},"providers:")," metainfo for the service provider's information, ",(0,a.kt)("inlineCode",{parentName:"p"},"consumers:"),' represents the service consumer metainfo. Click"',(0,a.kt)("strong",{parentName:"p"},"details"),'" can check the service status details:'),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://img.alicdn.com/tfs/TB1vZzfzQzoK1RjSZFlXXai4VXa-2714-1588.png",alt:"image-20181213104145998-4668906.png | left | 747x437"})),(0,a.kt)("p",null,"If you are using a Spring XML configuration file assembly Dubbo registry, please refer to the next section."),(0,a.kt)("h3",{id:"spring-xml-configuration-files"},"Spring XML configuration files"),(0,a.kt)("p",null,"Similarly, suppose you Dubbo applications using Nacos as registry, and the server IP address is:",(0,a.kt)("inlineCode",{parentName:"p"},"10.20.153.10"),", and assembling Spring Bean in the XML file, as shown below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:dubbo="http://dubbo.apache.org/schema/dubbo"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans-4.3.xsd        http://dubbo.apache.org/schema/dubbo        http://dubbo.apache.org/schema/dubbo/dubbo.xsd">\n \n    \x3c!-- \u63d0\u4f9b\u65b9\u5e94\u7528\u4fe1\u606f\uff0c\u7528\u4e8e\u8ba1\u7b97\u4f9d\u8d56\u5173\u7cfb --\x3e\n    <dubbo:application name="dubbo-provider-xml-demo"  />\n \n    \x3c!-- \u4f7f\u7528 Nacos \u6ce8\u518c\u4e2d\u5fc3 --\x3e\n    <dubbo:registry address="nacos://10.20.153.10:8848" />\n     \x3c!-- If you want to use your own namespace, you can use the following configuration --\x3e\n    \x3c!-- <dubbo:registry address="nacos://10.20.153.10:8848?namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932" /> --\x3e\n    ...\n</beans>\n')),(0,a.kt)("p",null,"After restart the Dubbo application, you can also find the provider and consumer registered metainfo is presented in Nacos console:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://img.alicdn.com/tfs/TB1zl2dzQPoK1RjSZKbXXX1IXXa-2784-1022.png",alt:"image-20181213113049185-4671849.png | left | 747x274"})),(0,a.kt)("p",null,"Whether you absolute configuration or switch Nacos registry super Easy? If you are still wanting more or less understand, may refer to the following the complete example."),(0,a.kt)("h2",{id:"complete-sample"},"Complete sample"),(0,a.kt)("p",null,"Above pictures of metadata from Dubbo Spring annotations driver sample and Dubbo Spring XML configuration driven example, the following will introduce both, you can choose your preference programming model.Before the formal discussion, first to introduce the preparation work, because they are dependent on the Java service interface and implementation.At the same time, ",(0,a.kt)("strong",{parentName:"p"},"please make sure that the local (",(0,a.kt)("inlineCode",{parentName:"strong"},"127.0.0.1"),") environment has launched Nacos service"),"."),(0,a.kt)("h3",{id:"sample-interface-and-implementation"},"Sample interface and implementation"),(0,a.kt)("p",null,"First define the sample interface, as shown below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package com.alibaba.nacos.example.dubbo.service;\n\npublic interface DemoService {\n    String sayName(String name);\n}\n")),(0,a.kt)("p",null,"Provide the above interface implementation class:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'\npackage com.alibaba.nacos.example.dubbo.service;\n\nimport com.alibaba.dubbo.config.annotation.Service;\nimport com.alibaba.dubbo.rpc.RpcContext;\nimport org.springframework.beans.factory.annotation.Value;\n\n/**\n * Default {@link DemoService}\n *  https://nacos.io/zh-cn/docs/use-nacos-with-dubbo.html\n * @since 2.6.5\n */\n@Service(version = "${demo.service.version}")\npublic class DefaultService implements DemoService {\n\n    @Value("${demo.service.name}")\n    private String serviceName;\n\n    public String sayName(String name) {\n        RpcContext rpcContext = RpcContext.getContext();\n        return String.format("Service [name :%s , port : %d] %s(\\"%s\\") : Hello,%s",\n                serviceName,\n                rpcContext.getLocalPort(),\n                rpcContext.getMethodName(),\n                name,\n                name);\n    }\n}\n')),(0,a.kt)("p",null,"Interface and implementation after ready, the following will be driven by annotations and XML configuration driven their implementation."),(0,a.kt)("h3",{id:"spring-annotations-driver-sample"},"Spring annotations driver sample"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-examples/tree/master/nacos-dubbo-example"},"https://github.com/nacos-group/nacos-examples/tree/master/nacos-dubbo-example")),(0,a.kt)("p",null,"Dubbo ",(0,a.kt)("inlineCode",{parentName:"p"},"2.5.7")," reconstructed the Spring annotations driver programming model."),(0,a.kt)("h4",{id:"provider-annotation-driven-implementation"},"Provider annotation driven implementation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Definition of Dubbo provider externalized configuration properties -  ",(0,a.kt)("inlineCode",{parentName:"li"},"provider-config.properties"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-properties"},"## application\ndubbo.application.name = dubbo-provider-demo\n\n## Nacos registry address\ndubbo.registry.address = nacos://127.0.0.1:8848\n##If you want to use your own namespace, you can use the following two methods:\n#dubbo.registry.address = nacos://127.0.0.1:8848?namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932\n#dubbo.registry.parameters.namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932\n\n## Dubbo Protocol\ndubbo.protocol.name = dubbo\ndubbo.protocol.port = -1\n\n# Provider @Service version\ndemo.service.version=1.0.0\ndemo.service.name = demoService\n\ndubbo.application.qosEnable=false\n\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Implement the provider to guide class - ",(0,a.kt)("inlineCode",{parentName:"li"},"DemoServiceProviderBootstrap"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.alibaba.nacos.example.dubbo.provider;\n\nimport com.alibaba.nacos.example.dubbo.service.DemoService;\nimport org.apache.dubbo.config.spring.context.annotation.EnableDubbo;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\nimport org.springframework.context.annotation.PropertySource;\nimport java.io.IOException;\n\n/**\n * {@link DemoService} provider demo\n * https://nacos.io/zh-cn/docs/use-nacos-with-dubbo.html\n */\n@EnableDubbo(scanBasePackages = "com.alibaba.nacos.example.dubbo.service")\n@PropertySource(value = "classpath:/provider-config.properties")\npublic class DemoServiceProviderBootstrap {\n\n    public static void main(String[] args) throws IOException {\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();\n        context.register(DemoServiceProviderBootstrap.class);\n        context.refresh();\n        System.out.println("DemoService provider is starting...");\n        System.in.read();\n    }\n}\n\n')),(0,a.kt)("p",null,"The annotation ",(0,a.kt)("inlineCode",{parentName:"p"},"@EnableDubbo")," activation Dubbo annotation driven and externalized configuration, its ",(0,a.kt)("inlineCode",{parentName:"p"},"scanBasePackages")," properties scanning to specify the Java package, all marked ",(0,a.kt)("inlineCode",{parentName:"p"},"@Service")," Service interface implementation class exposure for Spring Bean, then be exported Dubbo Service."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"@PropertySource")," is Spring Framework 3.1 introduced the standard import properties annotation configuration resources, it will provide Dubbo externalized configuration."),(0,a.kt)("h4",{id:"service-consumer-comments-drive-implementation"},"Service consumer comments drive implementation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Definition of Dubbo consumer externalized configuration properties -  ",(0,a.kt)("inlineCode",{parentName:"li"},"consumer-config.properties"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-properties"},"## Dubbo Application info\ndubbo.application.name = dubbo-consumer-demo\n\n## Nacos registry address\ndubbo.registry.address = nacos://127.0.0.1:8848\n##If you want to use your own namespace, you can use the following two methods:\n#dubbo.registry.address = nacos://127.0.0.1:8848?namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932\n#dubbo.registry.parameters.namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932\n\n# @Reference version\ndemo.service.version= 1.0.0\n\ndubbo.application.qosEnable=false\n\n")),(0,a.kt)("p",null,"Similarly, ",(0,a.kt)("inlineCode",{parentName:"p"},"dubbo.registry.address")," attribute points to Nacos registry, other dubbo service relevant meta information through Nacos registry access."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Implementation services consumer guide - ",(0,a.kt)("inlineCode",{parentName:"li"},"DemoServiceConsumerBootstrap"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.alibaba.nacos.example.dubbo.consumer;\n\n\nimport com.alibaba.nacos.example.dubbo.service.DemoService;\nimport org.apache.dubbo.config.spring.context.annotation.EnableDubbo;\nimport org.apache.dubbo.config.annotation.DubboReference;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\nimport org.springframework.context.annotation.PropertySource;\nimport javax.annotation.PostConstruct;\nimport java.io.IOException;\n\n/**\n * {@link DemoService} consumer demo\n * https://nacos.io/zh-cn/docs/use-nacos-with-dubbo.html\n */\n@EnableDubbo\n@PropertySource(value = "classpath:/consumer-config.properties")\npublic class DemoServiceConsumerBootstrap {\n\n    @DubboReference(version = "${demo.service.version}")\n    private DemoService demoService;\n\n    @PostConstruct\n    public void init() {\n        for (int i = 0; i < 10; i++) {\n            System.out.println(demoService.sayName("Nacos"));\n        }\n    }\n\n    public static void main(String[] args) throws IOException {\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();\n        context.register(DemoServiceConsumerBootstrap.class);\n        context.refresh();\n        context.close();\n    }\n}\n\n')),(0,a.kt)("p",null,"Similarly, ",(0,a.kt)("inlineCode",{parentName:"p"},"@EnableDubbo")," annotations to activate Dubbo annotation driven and externalized configuration, but the current belong to the Service consumers, without having to specify the Java package name scan label ",(0,a.kt)("inlineCode",{parentName:"p"},"@Service")," Service implementation."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"@Reference")," is Dubbo remote service dependency injection annotations, need service providers and consumers agreed interface (interface), version (version) and group (group) information.Example, in the current service consumption ",(0,a.kt)("inlineCode",{parentName:"p"},"DemoService")," service version from the configuration properties file ",(0,a.kt)("inlineCode",{parentName:"p"},"consumer-config.properties"),"."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"@PostConstruct")," code shows when ",(0,a.kt)("inlineCode",{parentName:"p"},"DemoServiceConsumerBootstrap")," Bean initialization, execution Dubbo ten times remote method invocation."),(0,a.kt)("h4",{id:"run-annotation-driver-sample"},"Run annotation driver sample"),(0,a.kt)("p",null,"Twice in the local boot ",(0,a.kt)("inlineCode",{parentName:"p"},"DemoServiceProviderBootstrap"),", the registry will appear two health services:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://img.alicdn.com/tfs/TB1s9fbzMHqK1RjSZFgXXa7JXXa-2390-122.png",alt:"image-20181213123909636-4675949.png | left | 747x38"})),(0,a.kt)("p",null,"Run again ",(0,a.kt)("inlineCode",{parentName:"p"},"DemoServiceConsumerBootstrap"),", run results as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'Service [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\n')),(0,a.kt)("p",null,"Operate, and service consumer using the load balancing strategy, RPC calls ten times the average contribution to two Dubbo provider instance."),(0,a.kt)("h3",{id:"spring-xml-configuration-driver-sample"},"Spring XML configuration driver sample"),(0,a.kt)("p",null,"The Spring XML configuration driven programming model is a traditional Spring assembly components."),(0,a.kt)("h4",{id:"provider-xml-configuration"},"Provider XML configuration"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Define the service provider XML context configuration file - ",(0,a.kt)("inlineCode",{parentName:"li"},"/META-INF/spring/dubbo-provider-context.xml"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:dubbo="http://dubbo.apache.org/schema/dubbo"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd        http://dubbo.apache.org/schema/dubbo        http://dubbo.apache.org/schema/dubbo/dubbo.xsd">\n\n    \x3c!-- \u63d0\u4f9b\u65b9\u5e94\u7528\u4fe1\u606f\uff0c\u7528\u4e8e\u8ba1\u7b97\u4f9d\u8d56\u5173\u7cfb --\x3e\n    <dubbo:application name="dubbo-provider-xml-demo"/>\n\n    \x3c!-- \u4f7f\u7528 Nacos \u6ce8\u518c\u4e2d\u5fc3 --\x3e\n    <dubbo:registry address="nacos://127.0.0.1:8848"/>\n    \x3c!-- If you want to use your own namespace, you can use the following configuration --\x3e\n    \x3c!-- <dubbo:registry address="nacos://127.0.0.1:8848?namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932" /> --\x3e\n\n    \x3c!-- \u7528dubbo\u534f\u8bae\u5728\u968f\u673a\u7aef\u53e3\u66b4\u9732\u670d\u52a1 --\x3e\n    <dubbo:protocol name="dubbo" port="-1"/>\n\n    \x3c!-- \u58f0\u660e\u9700\u8981\u66b4\u9732\u7684\u670d\u52a1\u63a5\u53e3 --\x3e\n    <dubbo:service interface="com.alibaba.nacos.example.dubbo.service.DemoService" ref="demoService" version="2.0.0"/>\n\n    \x3c!-- \u548c\u672c\u5730bean\u4e00\u6837\u5b9e\u73b0\u670d\u52a1 --\x3e\n    <bean id="demoService" class="com.alibaba.nacos.example.dubbo.service.DefaultService"/>\n</beans>\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Implement the provider to guide class - ",(0,a.kt)("inlineCode",{parentName:"li"},"DemoServiceProviderXmlBootstrap"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'package com.alibaba.nacos.example.dubbo.provider;\n\nimport com.alibaba.dubbo.demo.service.DemoService;\n\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport java.io.IOException;\n\n/**\n * {@link DemoService} provider demo XML bootstrap\n */\npublic class DemoServiceProviderXmlBootstrap {\n\n    public static void main(String[] args) throws IOException {\n        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext();\n        context.setConfigLocation("/META-INF/spring/dubbo-provider-context.xml");\n        context.refresh();\n        System.out.println("DemoService provider (XML) is starting...");\n        System.in.read();\n    }\n}\n')),(0,a.kt)("h4",{id:"service-consumer-driven-xml-configuration"},"Service consumer driven XML configuration"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Define the service consumer context XML configuration files - ",(0,a.kt)("inlineCode",{parentName:"li"},"/META-INF/spring/dubbo-consumer-context.xml"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:dubbo="http://dubbo.apache.org/schema/dubbo"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans-4.3.xsd        http://dubbo.apache.org/schema/dubbo        http://dubbo.apache.org/schema/dubbo/dubbo.xsd">\n\n    \x3c!-- \u63d0\u4f9b\u65b9\u5e94\u7528\u4fe1\u606f\uff0c\u7528\u4e8e\u8ba1\u7b97\u4f9d\u8d56\u5173\u7cfb --\x3e\n    <dubbo:application name="dubbo-consumer-xml-demo"/>\n\n    \x3c!-- \u4f7f\u7528 Nacos \u6ce8\u518c\u4e2d\u5fc3 --\x3e\n    <dubbo:registry address="nacos://127.0.0.1:8848"/>\n    \x3c!-- If you want to use your own namespace, you can use the following configuration --\x3e\n    \x3c!-- <dubbo:registry address="nacos://127.0.0.1:8848?namespace=5cbb70a5-xxx-xxx-xxx-d43479ae0932" /> --\x3e\n\n    \x3c!-- \u5f15\u7528\u670d\u52a1\u63a5\u53e3 --\x3e\n    <dubbo:reference id="demoService" interface="com.alibaba.nacos.example.dubbo.service.DemoService" version="2.0.0"/>\n\n</beans>\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Implementation services consumer guide - ",(0,a.kt)("inlineCode",{parentName:"li"},"DemoServiceConsumerXmlBootstrap"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.alibaba.nacos.example.dubbo.consumer;\n\nimport com.alibaba.dubbo.demo.service.DemoService;\n\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport java.io.IOException;\n\n/**\n * {@link DemoService} consumer demo XML bootstrap\n */\npublic class DemoServiceConsumerXmlBootstrap {\n\n    public static void main(String[] args) throws IOException {\n        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext();\n        context.setConfigLocation("/META-INF/spring/dubbo-consumer-context.xml");\n        context.refresh();\n        System.out.println("DemoService consumer (XML) is starting...");\n        DemoService demoService = context.getBean("demoService", DemoService.class);\n        for (int i = 0; i < 10; i++) {\n            System.out.println(demoService.sayName("Nacos"));\n        }\n        context.close();\n    }\n}\n')),(0,a.kt)("h4",{id:"run-the-xml-configuration-driven-example"},"Run the XML configuration driven example"),(0,a.kt)("p",null,"Similarly, to start the first two ",(0,a.kt)("inlineCode",{parentName:"p"},"DemoServiceProviderXmlBootstrap")," bootstrap class, observe Nacos registry service provider changes:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://img.alicdn.com/tfs/TB1HCfbzMHqK1RjSZFgXXa7JXXa-2388-106.png",alt:"image-20181213125527201-4676927.png | left | 747x33"})),(0,a.kt)("p",null,"XML configuration driven service version for ",(0,a.kt)("inlineCode",{parentName:"p"},"2.0.0"),", therefore the registration service and correct."),(0,a.kt)("p",null,"Again run service consumers leading class ",(0,a.kt)("inlineCode",{parentName:"p"},"DemoServiceConsumerXmlBootstrap"),", watch the console output:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'Service [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\nService [name :demoService , port : 20880] sayName("Nacos") : Hello,Nacos\n')),(0,a.kt)("p",null,"Results also runs and load balancing is normal, but because the current sample has yet to add attributes ",(0,a.kt)("inlineCode",{parentName:"p"},"demo.service.name"),' of therefore, "name" part of the information output ',(0,a.kt)("inlineCode",{parentName:"p"},"null"),"."),(0,a.kt)("p",null,'If your attention or love Dubbo and Nacos open source project, as well as for their points of "star", related links:'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Apache Dubbo\uff1a",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/dubbo"},"https://github.com/apache/dubbo")),(0,a.kt)("li",{parentName:"ul"},"Dubbo Nacos Registry\uff1a",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/dubbo/tree/master/dubbo-registry/dubbo-registry-nacos"},"https://github.com/apache/dubbo/tree/master/dubbo-registry/dubbo-registry-nacos")),(0,a.kt)("li",{parentName:"ul"},"Alibaba Nacos\uff1a",(0,a.kt)("a",{parentName:"li",href:"https://github.com/alibaba/nacos"},"https://github.com/alibaba/nacos"))))}u.isMDXComponent=!0}}]);