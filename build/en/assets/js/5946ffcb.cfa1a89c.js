"use strict";(self.webpackChunkNacos=self.webpackChunkNacos||[]).push([[5158],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>N});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(t),u=r,N=d["".concat(s,".").concat(u)]||d[u]||m[u]||i;return t?a.createElement(N,o(o({ref:n},c),{},{components:t})):a.createElement(N,o({ref:n},c))}));function N(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},39477:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=t(87462),r=(t(67294),t(3905));const i={title:"Nacos with Spring Projects",keywords:["Nacos","Spring","quick start"],description:"This quick start introduces how to enable Nacos configuration management and service discovery features for your Spring project."},o="Nacos with Spring Projects",l={unversionedId:"v2/ecology/use-nacos-with-spring",id:"version-2.X/v2/ecology/use-nacos-with-spring",title:"Nacos with Spring Projects",description:"This quick start introduces how to enable Nacos configuration management and service discovery features for your Spring project.",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-2.X/v2/ecology/use-nacos-with-spring.md",sourceDirName:"v2/ecology",slug:"/v2/ecology/use-nacos-with-spring",permalink:"/en/docs/v2/ecology/use-nacos-with-spring",draft:!1,tags:[],version:"2.X",frontMatter:{title:"Nacos with Spring Projects",keywords:["Nacos","Spring","quick start"],description:"This quick start introduces how to enable Nacos configuration management and service discovery features for your Spring project."},sidebar:"docs",previous:{title:"Nacos with Dubbo fusion become registry",permalink:"/en/docs/v2/ecology/use-nacos-with-dubbo"},next:{title:"Nacos with Spring Boot Projects",permalink:"/en/docs/v2/ecology/use-nacos-with-spring-boot"}},s={},p=[{value:"Prerequisite",id:"prerequisite",level:2},{value:"Enable Configuration Service",id:"enable-configuration-service",level:2},{value:"Enable Service Discovery",id:"enable-service-discovery",level:2},{value:"1. Annotation-Driven",id:"1-annotation-driven",level:2},{value:"1.1. Enable Nacos",id:"11-enable-nacos",level:3},{value:"1.2. Configure Change Listener method",id:"12-configure-change-listener-method",level:3},{value:"1.2.1. Type Conversion",id:"121-type-conversion",level:4},{value:"1.2.2. Timeout of Execution",id:"122-timeout-of-execution",level:4},{value:"1.3. Global and Special Nacos Properties",id:"13-global-and-special-nacos-properties",level:3},{value:"1.4. <code>@NacosProperties</code>",id:"14-nacosproperties",level:3},{value:"2. Dependency Injection",id:"2-dependency-injection",level:2},{value:"3. Externalized Configuration",id:"3-externalized-configuration",level:2},{value:"4. Event/Listener Driven",id:"4-eventlistener-driven",level:2}],c={toc:p},d="wrapper";function m(e){let{components:n,...t}=e;return(0,r.kt)(d,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"nacos-with-spring-projects"},"Nacos with Spring Projects"),(0,r.kt)("p",null,"This quick start introduces how to enable Nacos configuration management and service discovery features for your Spring project."),(0,r.kt)("p",null,"For more details about Nacos Spring Boot: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-spring-project/wiki/Nacos-Spring-Project-0.3.1-%E6%96%B0%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C"},"nacos-spring-project"),"."),(0,r.kt)("p",null,"The quick start includes two samples:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"How to enable Nacos server and Nacos Spring configuration modules to implement dynamic configuration management;"),(0,r.kt)("li",{parentName:"ul"},"How to enable Nacos server and Nacos Spring service discovery modules to implement service registration and discovery.")),(0,r.kt)("h2",{id:"prerequisite"},"Prerequisite"),(0,r.kt)("p",null,"Follow instructions in ",(0,r.kt)("a",{parentName:"p",href:"/en/docs/v2/quickstart/quick-start"},"Nacos Quick Start")," to download Nacos and start the Nacos server."),(0,r.kt)("h2",{id:"enable-configuration-service"},"Enable Configuration Service"),(0,r.kt)("p",null,"Once you start the Nacos server, you can follow the steps below to enable the Nacos configuration management service for your Spring project. "),(0,r.kt)("p",null,"Sample project: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-examples/tree/master/nacos-spring-example/nacos-spring-config-example"},"nacos-spring-config-example")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Add the Nacos Spring dependency.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"<dependency>\n    <groupId>com.alibaba.nacos</groupId>\n    <artifactId>nacos-spring-context</artifactId>\n    <version>${latest.version}</version>\n</dependency>\n")),(0,r.kt)("p",null,'The the latest version can be available in maven repositories such as "',(0,r.kt)("a",{parentName:"p",href:"https://mvnrepository.com/artifact/com.alibaba.nacos/nacos-spring-context"},"mvnrepository.com"),'".'),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Add the ",(0,r.kt)("inlineCode",{parentName:"li"},"@EnableNacosConfig")," annotation to enable the configuration service. In the code below, ",(0,r.kt)("inlineCode",{parentName:"li"},"@NacosPropertySource")," is used to load the configuration source whose  ",(0,r.kt)("inlineCode",{parentName:"li"},"dataId")," is ",(0,r.kt)("inlineCode",{parentName:"li"},"example")," , and autorefresh is also enabled:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'@Configuration\n@EnableNacosConfig(globalProperties = @NacosProperties(serverAddr = "127.0.0.1:8848"))\n@NacosPropertySource(dataId = "example", autoRefreshed = true)\npublic class NacosConfiguration {\n\n}\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Specify the property value for the ",(0,r.kt)("inlineCode",{parentName:"li"},"@NacosValue")," annotation of Nacos. ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'@Controller\n@RequestMapping("config")\npublic class ConfigController {\n\n    @NacosValue(value = "${useLocalCache:false}", autoRefreshed = true)\n    private boolean useLocalCache;\n\n    @RequestMapping(value = "/get", method = GET)\n    @ResponseBody\n    public boolean get() {\n        return useLocalCache;\n    }\n}\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start Tomcat and call  ",(0,r.kt)("inlineCode",{parentName:"p"},"curl http://localhost:8080/config/get")," to get configuration information. Because no configuration has been published, a ",(0,r.kt)("inlineCode",{parentName:"p"},"false"),"message is returned.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Now you can call ",(0,r.kt)("a",{parentName:"p",href:"/en/docs/v2/guide/user/open-api"},"Nacos Open API")," to publish a configruation to the Nacos server. Assume the dataId is ",(0,r.kt)("inlineCode",{parentName:"p"},"example"),", and content is ",(0,r.kt)("inlineCode",{parentName:"p"},"useLocalCache=true"),"."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X POST "http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=example&group=DEFAULT_GROUP&content=useLocalCache=true"\n')),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Access ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:8080/config/get"),"again, and you get a return message of ",(0,r.kt)("inlineCode",{parentName:"li"},"true"),", indicating that the value of ",(0,r.kt)("inlineCode",{parentName:"li"},"useLocalCache"),"in your application has been updated.")),(0,r.kt)("h2",{id:"enable-service-discovery"},"Enable Service Discovery"),(0,r.kt)("p",null,"Now you would like to enable the service discovery function of Nacos in your Spring project. "),(0,r.kt)("p",null,"Sampe project: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-examples/tree/master/nacos-spring-example/nacos-spring-discovery-example"},"nacos-spring-discovery-example")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Add the Nacos Spring dependency.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"<dependency>\n    <groupId>com.alibaba.nacos</groupId>\n    <artifactId>nacos-spring-context</artifactId>\n    <version>${latest.version}</version>\n</dependency>\n")),(0,r.kt)("p",null,'The the latest version can be available in maven repositories such as "',(0,r.kt)("a",{parentName:"p",href:"https://mvnrepository.com/artifact/com.alibaba.nacos/nacos-spring-context"},"mvnrepository.com"),'".'),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Add the ",(0,r.kt)("inlineCode",{parentName:"li"},"@EnableNacosDiscovery")," annotation to enable the service discovery function of Nacos:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'@Configuration\n@EnableNacosDiscovery(globalProperties = @NacosProperties(serverAddr = "127.0.0.1:8848"))\npublic class NacosConfiguration {\n\n}\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Use ",(0,r.kt)("inlineCode",{parentName:"li"},"@NacosInjected")," to inject a Nacos ",(0,r.kt)("inlineCode",{parentName:"li"},"NamingService")," instance:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'@Controller\n@RequestMapping("discovery")\npublic class DiscoveryController {\n\n    @NacosInjected\n    private NamingService namingService;\n\n    @RequestMapping(value = "/get", method = GET)\n    @ResponseBody\n    public List<Instance> get(@RequestParam String serviceName) throws NacosException {\n        return namingService.getAllInstances(serviceName);\n    }\n}\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start Tomcat and call ",(0,r.kt)("inlineCode",{parentName:"p"},"curl http://localhost:8080/discovery/get?serviceName=example"),", and the return value is an empty JSON array ",(0,r.kt)("inlineCode",{parentName:"p"},"[]"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Call ",(0,r.kt)("a",{parentName:"p",href:"/en/docs/v2/guide/user/open-api"},"Nacos Open API")," to register a service called ",(0,r.kt)("inlineCode",{parentName:"p"},"example"),"to the Nacos Server."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"curl -X POST 'http://127.0.0.1:8848/nacos/v1/ns/instance?serviceName=example&ip=127.0.0.1&port=8080'\n")),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Access ",(0,r.kt)("inlineCode",{parentName:"li"},"curl http://localhost:8080/discovery/get?serviceName=example"),"again, and you will get the following return:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'[\n  {\n    "instanceId": "127.0.0.1#8080#DEFAULT#example",\n    "ip": "127.0.0.1",\n    "port": 8080,\n    "weight": 1.0,\n    "healthy": true,\n    "cluster": {\n      "serviceName": null,\n      "name": "",\n      "healthChecker": {\n        "type": "TCP"\n      },\n      "defaultPort": 80,\n      "defaultCheckPort": 80,\n      "useIPPort4Check": true,\n      "metadata": {}\n    },\n    "service": null,\n    "metadata": {}\n  }\n]\n')),(0,r.kt)("h1",{id:"nacos-spring-key-features"},"Nacos Spring Key Features"),(0,r.kt)("p",null,"This section provides a detailed description of the key features of ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-spring-project"},(0,r.kt)("inlineCode",{parentName:"a"},"nacos-spring-context")),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Annotation-Driven"),(0,r.kt)("li",{parentName:"ul"},"Dependency Injection"),(0,r.kt)("li",{parentName:"ul"},"Externalized Configuration"),(0,r.kt)("li",{parentName:"ul"},"Event-Driven")),(0,r.kt)("h2",{id:"1-annotation-driven"},"1. Annotation-Driven"),(0,r.kt)("h3",{id:"11-enable-nacos"},"1.1. Enable Nacos"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacos")," is a modular-driven annotation that enables all features of Nacos Spring, including ",(0,r.kt)("strong",{parentName:"p"},"Service Discovery")," and ",(0,r.kt)("strong",{parentName:"p"},"Distributed Configuration"),". It equals to  ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosDiscovery")," and\n",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosConfig"),", which can be configured separately and used in different scenarios."),(0,r.kt)("h3",{id:"12-configure-change-listener-method"},"1.2. Configure Change Listener method"),(0,r.kt)("p",null,"Suppose there was a config in Nacos Server whose ",(0,r.kt)("inlineCode",{parentName:"p"},"dataId"),' is "testDataId" and ',(0,r.kt)("inlineCode",{parentName:"p"},"groupId"),' is default group("DEFAULT_GROUP"). Now you would like to change its content by using the ',(0,r.kt)("inlineCode",{parentName:"p"},"ConfigService#publishConfig")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@NacosInjected\nprivate ConfigService configService;\n\n@Test\npublic void testPublishConfig() throws NacosException {\n    configService.publishConfig(DATA_ID, DEFAULT_GROUP, "9527");\n}\n')),(0,r.kt)("p",null,"Then you would like to add a listener, which will be listening for the config changes. You can do this by adding a config change listener method into your Spring Beans:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@NacosConfigListener(dataId = DATA_ID)\npublic void onMessage(String config) {\n    assertEquals("mercyblitz", config); // asserts true\n}\n')),(0,r.kt)("p",null,"The code below has the same effect:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'configService.addListener(DATA_ID, DEFAULT_GROUP, new AbstractListener() {\n    @Override\n    public void receiveConfigInfo(String config) {\n        assertEquals("9527", config); // asserts true\n    }\n});\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosConfigListener")," supports richer type conversions."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/listener/SimpleNacosConfigListener.java"},"Simple Sample of ",(0,r.kt)("inlineCode",{parentName:"a"},"@NacosConfigListener")))),(0,r.kt)("h4",{id:"121-type-conversion"},"1.2.1. Type Conversion"),(0,r.kt)("p",null,"The type conversion of ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosConfigListener")," includes both build-in and customized implementations. By default, build-in type conversion is based on Spring ",(0,r.kt)("inlineCode",{parentName:"p"},"DefaultFormattingConversionService"),", which means it covers most of the general cases as well as the rich features of the higher Spring framework. "),(0,r.kt)("p",null,'For example, the content "9527" in the preceding example can also be listened by a method with integer or the ',(0,r.kt)("inlineCode",{parentName:"p"},"Integer")," argument:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@NacosConfigListener(dataId = DATA_ID)\npublic void onInteger(Integer value) {\n    assertEquals(Integer.valueOf(9527), value); // asserts true\n}\n\n@NacosConfigListener(dataId = DATA_ID)\npublic void onInt(int value) {\n    assertEquals(9527, value); // asserts true\n}\n")),(0,r.kt)("p",null,"Of course, ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-spring-project"},(0,r.kt)("inlineCode",{parentName:"a"},"nacos-spring-context"))," provides elastic extension for developers. If you define a named ",(0,r.kt)("inlineCode",{parentName:"p"},"nacosConfigConversionService")," Spring Bean whose type is ",(0,r.kt)("inlineCode",{parentName:"p"},"ConversionService")," , the ",(0,r.kt)("inlineCode",{parentName:"p"},"DefaultFormattingConversionService")," will be ignored. In addition, you can customize the implementation of  the ",(0,r.kt)("inlineCode",{parentName:"p"},"NacosConfigConverter")," interface to specify a listener method for type conversion:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class UserNacosConfigConverter implements NacosConfigConverter<User> {\n\n    @Override\n    public boolean canConvert(Class<User> targetType) {\n        return true;\n    }\n\n    @Override\n    public User convert(String source) {\n        return JSON.parseObject(source, User.class);\n    }\n}\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"UserNacosConfigConverter")," class binds the ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosConfigListener.converter()")," attribute:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@NacosInjected\nprivate ConfigService configService;\n\n@Test\npublic void testPublishUser() throws NacosException {\n    configService.publishConfig("user", DEFAULT_GROUP, "{\\"id\\":1,\\"name\\":\\"mercyblitz\\"}");\n}\n\n@NacosConfigListener(dataId = "user", converter = UserNacosConfigConverter.class)\npublic void onUser(User user) {\n    assertEquals(Long.valueOf(1L), user.getId()); \n    assertEquals("mercyblitz", user.getName());\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/listener/PojoNacosConfigListener.java"},"Type Conversion Sample of ",(0,r.kt)("inlineCode",{parentName:"a"},"@NacosConfigListener")))),(0,r.kt)("h4",{id:"122-timeout-of-execution"},"1.2.2. Timeout of Execution"),(0,r.kt)("p",null,"As it might cost some time to run customized ",(0,r.kt)("inlineCode",{parentName:"p"},"NacosConfigConverter"),", you can set  max execution time in the ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosConfigListener.timeout()")," attribute to prevent it from blocking other listeners:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Configuration\npublic class Listeners {\n\n    private Integer integerValue;\n\n    private Double doubleValue;\n\n    @NacosConfigListener(dataId = DATA_ID, timeout = 50)\n    public void onInteger(Integer value) throws Exception {\n        Thread.sleep(100); // timeout of execution\n        this.integerValue = value;\n    }\n\n    @NacosConfigListener(dataId = DATA_ID, timeout = 200)\n    public void onDouble(Double value) throws Exception {\n        Thread.sleep(100); // normal execution\n        this.doubleValue = value;\n    }\n\n    public Integer getIntegerValue() {\n        return integerValue;\n    }\n\n    public Double getDoubleValue() {\n        return doubleValue;\n    }\n}\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"integerValue")," of ",(0,r.kt)("inlineCode",{parentName:"p"},"Listeners")," Bean is always ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," and will not be changed. Therefore, those asserts will be ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Autowired\nprivate Listeners listeners;\n\n@Test\npublic void testPublishConfig() throws NacosException {\n    configService.publishConfig(DATA_ID, DEFAULT_GROUP, "9527");\n    assertNull(listeners.getIntegerValue()); // asserts true\n    assertEquals(Double.valueOf(9527), listeners.getDoubleValue());   // asserts true\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/listener/TimeoutNacosConfigListener.java"},"Timeout Sample of ",(0,r.kt)("inlineCode",{parentName:"a"},"@NacosConfigListener")))),(0,r.kt)("h3",{id:"13-global-and-special-nacos-properties"},"1.3. Global and Special Nacos Properties"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"globalProperties")," is a required attribute in any ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacos"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosDiscovery")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosConfig"),", and its type is ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosProperties"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"globalProperties"),' initializes "',(0,r.kt)("strong",{parentName:"p"},"Global Nacos Properties"),'" that will be used by other annotations\nand components, e,g ',(0,r.kt)("inlineCode",{parentName:"p"},"@NacosInjected"),". In other words, ",(0,r.kt)("strong",{parentName:"p"},"Global Nacos Properties"),'" defines the global and default properties. It is set with the lowest priority and can be overridden if needed. The precedence of overiding rules is shown in the following table:'),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Precedence Order"),(0,r.kt)("th",{parentName:"tr",align:null},"Nacos Annotation"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"*.properties()")),(0,r.kt)("td",{parentName:"tr",align:null},"N")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@EnableNacosConfig.globalProperties()")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"@EnableNacosDiscovery.globalProperties()")),(0,r.kt)("td",{parentName:"tr",align:null},"Y")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@EnableNacos.globalProperties()")),(0,r.kt)("td",{parentName:"tr",align:null},"Y")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"*.properties()")," defines special Nacos properties which come from one of the following:  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@NacosInjected.properties()")," "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@NacosConfigListener.properties()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@NacosPropertySource.properties()")," "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@NacosConfigurationProperties.properties()"))),(0,r.kt)("p",null,"Special Nacos properties are also configured by ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosProperties"),". However, they are optional and are used to override Global Nacos Properties in special scenarios. If not defined, the Nacos Properties will\ntry to retrieve properities from ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosConfig.globalProperties()")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosDiscovery.globalProperties()"),", or\n",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacos.globalProperties()"),"."),(0,r.kt)("h3",{id:"14-nacosproperties"},"1.4. ",(0,r.kt)("inlineCode",{parentName:"h3"},"@NacosProperties")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@NacosProperties")," is a uniform annotation for global and special Nacos properties. It serves as a mediator between Java ",(0,r.kt)("inlineCode",{parentName:"p"},"Properties")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"NacosFactory")," class.   ",(0,r.kt)("inlineCode",{parentName:"p"},"NacosFactory")," is responsible for creating ",(0,r.kt)("inlineCode",{parentName:"p"},"ConfigService")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"NamingService")," instances. "),(0,r.kt)("p",null,"The attributes of ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosProperties")," completely support placeholders whose source is all kinds of ",(0,r.kt)("inlineCode",{parentName:"p"},"PropertySource")," in Spring ",(0,r.kt)("inlineCode",{parentName:"p"},"Environment")," abstraction, typically Java System ",(0,r.kt)("inlineCode",{parentName:"p"},"Properties")," and OS environment variables. The prefix of all placeholders are ",(0,r.kt)("inlineCode",{parentName:"p"},"nacos."),".  The mapping between the attributes of ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosProperties")," and Nacos properties are shown below: "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Placeholder"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"endpoint()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"endpoint")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.endpoint:}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"N")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"namespace()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"namespace")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.namespace:}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"N")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"accessKey()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"access-key")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.access-key:}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"N")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"secretKey()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"secret-key")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.secret-key:}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"N")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"serverAddr()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"server-addr")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.server-addr:}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Y")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"contextPath()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"context-path")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.context-path:}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"N")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"clusterName()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"cluster-name")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.cluster-name:}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"N")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"encode()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"encode")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.encode:UTF-8}")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"N")))),(0,r.kt)("p",null,"Note that there are some differences in the placeholders of ",(0,r.kt)("inlineCode",{parentName:"p"},"globalProperties()")," between ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosDiscovery")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosConfig"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"@EnableNacosDiscovery"),"'s Placeholder"),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"@EnableNacosConfig"),"'s Placeholder"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"endpoint()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.endpoint:${nacos.endpoint:}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.endpoint:${nacos.endpoint:}}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"namespace()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.namespace:${nacos.namespace:}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.namespace:${nacos.namespace:}}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"accessKey()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.access-key:${nacos.access-key:}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.access-key:${nacos.access-key:}}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"secretKey()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.secret-key:${nacos.secret-key:}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.secret-key:${nacos.secret-key:}}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"serverAddr()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.server-addr:${nacos.server-addr:}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.server-addr:${nacos.server-addr:}}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"contextPath()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.context-path:${nacos.context-path:}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.context-path:${nacos.context-path:}}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"clusterName()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.cluster-name:${nacos.cluster-name:}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.cluster-name:${nacos.cluster-name:}}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"encode()")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.discovery.encode:${nacos.encode:UTF-8}}")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"${nacos.config.encode:${nacos.encode:UTF-8}}"))))),(0,r.kt)("p",null,"These placeholders of ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosDiscovery")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosConfig")," are designed to isolate different Nacos servers, and are unnecessary in most scenarios.  By default, general placeholders will be reused."),(0,r.kt)("h2",{id:"2-dependency-injection"},"2. Dependency Injection"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@NacosInjected")," is a core annotation which is used to inject ",(0,r.kt)("inlineCode",{parentName:"p"},"ConfigService")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"NamingService")," instance in your Spring Beans and make these instances ",(0,r.kt)("strong",{parentName:"p"},"cacheable"),". This means the instances will be the same if their ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosProperties")," are equal, regargless of whether the properties come from global or special Nacos properties:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@NacosInjected\nprivate ConfigService configService;\n\n@NacosInjected(properties = @NacosProperties(encode = "UTF-8"))\nprivate ConfigService configService2;\n\n@NacosInjected(properties = @NacosProperties(encode = "GBK"))\nprivate ConfigService configService3;\n\n@NacosInjected\nprivate NamingService namingService;\n\n@NacosInjected(properties = @NacosProperties(encode = "UTF-8"))\nprivate NamingService namingService2;\n\n@NacosInjected(properties = @NacosProperties(encode = "GBK"))\nprivate NamingService namingService3;\n\n@Test\npublic void testInjection() {\n\n    Assert.assertEquals(configService, configService2);\n    Assert.assertNotEquals(configService2, configService3);\n\n    Assert.assertEquals(namingService, namingService2);\n    Assert.assertNotEquals(namingService2, namingService3);\n}\n')),(0,r.kt)("p",null,"The property ",(0,r.kt)("inlineCode",{parentName:"p"},"configService")," uses ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacos#globalProperties()")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"@EnableNacosConfig#globalProperties()"),", and because the default value of the ",(0,r.kt)("inlineCode",{parentName:"p"},"encode"),' attribute is "UTF-8", therefore the ',(0,r.kt)("inlineCode",{parentName:"p"},"configService")," instance and the ",(0,r.kt)("inlineCode",{parentName:"p"},"configService2")," instance which is annotated by ",(0,r.kt)("inlineCode",{parentName:"p"},'@NacosProperties(encode = "UTF-8")')," are the same. The same is true for ",(0,r.kt)("inlineCode",{parentName:"p"},"namingService")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"namingService2"),"."),(0,r.kt)("p",null,"More importantly, unlike the ",(0,r.kt)("inlineCode",{parentName:"p"},"ConfigService")," instances created by the ",(0,r.kt)("inlineCode",{parentName:"p"},"NacosFactory.createConfigService()")," method, the ",(0,r.kt)("inlineCode",{parentName:"p"},"ConfigService")," instances created by the ",(0,r.kt)("inlineCode",{parentName:"p"},"@NacosInjected")," annotation support Nacos Spring events. For instance, there will be an ",(0,r.kt)("inlineCode",{parentName:"p"},"NacosConfigPublishedEvent"),"  after an enhanced ",(0,r.kt)("inlineCode",{parentName:"p"},"ConfigService")," invokes the ",(0,r.kt)("inlineCode",{parentName:"p"},"publishConfig()")," method. Refer to the ",(0,r.kt)("a",{parentName:"p",href:"#eventlistener-driven"},"Event/Listener Driven")," section for more details."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/NacosConfiguration.java"},"Dependency Injection Sample"))),(0,r.kt)("h2",{id:"3-externalized-configuration"},"3. Externalized Configuration"),(0,r.kt)("p",null,"Externalized configuration is a concept introduced by Spring Boot, which allows applications to receive external property sources to control runtime behavior. Nacos Server runs an isolation process outside the application to maintain the application configurations. ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-spring-project"},(0,r.kt)("inlineCode",{parentName:"a"},"nacos-spring-context"))," provides properties features including object binding, dynamic configuration(auto-refreshed) and so on, and dependence on Spring Boot or Spring Cloud framework is required."),(0,r.kt)("p",null,"Here is a simple comparison between  ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-spring-project"},(0,r.kt)("inlineCode",{parentName:"a"},"nacos-spring-context"))," and Spring stack:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Spring Stack"),(0,r.kt)("th",{parentName:"tr",align:null},"Nacos Spring"),(0,r.kt)("th",{parentName:"tr",align:null},"Highlight"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@Value")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@NacosValue")),(0,r.kt)("td",{parentName:"tr",align:null},"auto-refreshed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@ConfigurationProperties")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@NacosConfigurationProperties")),(0,r.kt)("td",{parentName:"tr",align:null},"auto-refreshed,",(0,r.kt)("inlineCode",{parentName:"td"},"@NacosProperty"),",",(0,r.kt)("inlineCode",{parentName:"td"},"@NacosIgnore"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@PropertySource")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@NacosPropertySource")),(0,r.kt)("td",{parentName:"tr",align:null},"auto-refreshed, precedence order control")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@PropertySources")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"@NacosPropertySources")),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"See ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/properties/NacosConfigurationPropertiesConfiguration.java"},"Auto-Refreshed Sample of ",(0,r.kt)("inlineCode",{parentName:"a"},"@NacosConfigurationProperties")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"See ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/env/NacosPropertySourceConfiguration.java"},"Sample of ",(0,r.kt)("inlineCode",{parentName:"a"},"@NacosPropertySources")," and ",(0,r.kt)("inlineCode",{parentName:"a"},"@NacosPropertySource"))))),(0,r.kt)("h2",{id:"4-eventlistener-driven"},"4. Event/Listener Driven"),(0,r.kt)("p",null,"Nacos Event/Listener Driven is based on the standard Spring Event/Listener mechanism. The ",(0,r.kt)("inlineCode",{parentName:"p"},"ApplicationEvent")," of Spring is an abstract super class for all Nacos Spring events:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Nacos Spring Event"),(0,r.kt)("th",{parentName:"tr",align:null},"Trigger"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NacosConfigPublishedEvent")),(0,r.kt)("td",{parentName:"tr",align:null},"After ",(0,r.kt)("inlineCode",{parentName:"td"},"ConfigService.publishConfig()"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NacosConfigReceivedEvent")),(0,r.kt)("td",{parentName:"tr",align:null},"After",(0,r.kt)("inlineCode",{parentName:"td"},"Listener.receiveConfigInfo()"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NacosConfigRemovedEvent")),(0,r.kt)("td",{parentName:"tr",align:null},"After ",(0,r.kt)("inlineCode",{parentName:"td"},"configService.removeConfig()"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NacosConfigTimeoutEvent")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ConfigService.getConfig()")," on timeout")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NacosConfigListenerRegisteredEvent")),(0,r.kt)("td",{parentName:"tr",align:null},"After ",(0,r.kt)("inlineCode",{parentName:"td"},"ConfigService.addListner()")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"ConfigService.removeListener()"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NacosConfigurationPropertiesBeanBoundEvent")),(0,r.kt)("td",{parentName:"tr",align:null},"After ",(0,r.kt)("inlineCode",{parentName:"td"},"@NacosConfigurationProperties")," binding")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NacosConfigMetadataEvent")),(0,r.kt)("td",{parentName:"tr",align:null},"After Nacos Config operations")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/event/NacosEventListenerConfiguration.java"},"Event/Listener Sample"))),(0,r.kt)("h1",{id:"related-projects"},"Related Projects"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/alibaba/nacos"},"Nacos")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/nacos-group/nacos-spring-project"},"Nacos Spring")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/nacos-group/nacos-spring-boot-project"},"Nacos Spring Boot")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/spring-cloud-incubator/spring-cloud-alibaba"},"Spring Cloud Alibaba"))))}m.isMDXComponent=!0}}]);